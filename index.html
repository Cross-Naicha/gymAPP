<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Rutina de hoy</title>
  <style>
    :root{
      --bg:#0b0c10;--card:#121318;--ink:#e8eaf1;--muted:#a9b0c0;--accent:#7c5cff;--border:#232533;
      --shadow:0 10px 25px rgba(0,0,0,.35);--radius:14px;
    }
    @media (prefers-color-scheme: light){:root{--bg:#f6f7fb;--card:#fff;--ink:#151824;--muted:#57607a;--border:#e6e8ef;--shadow:0 10px 25px rgba(0,0,0,.08)}}
    *{box-sizing:border-box}
    body{
      margin:0; font-family: ui-sans-serif,system-ui,-apple-system,Roboto,Arial;
      background: var(--bg); color: var(--ink); padding:20px; line-height:1.35;
    }
    header{max-width:980px;margin:0 auto 16px;display:flex;align-items:center;justify-content:space-between}
    h1{font-size:clamp(22px,3.2vw,30px);margin:0}
    .muted{color:var(--muted);font-size:.95rem}
    .status{padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,rgba(88,213,166,.2),transparent)}
    .status.err{background:linear-gradient(180deg,rgba(255,99,99,.25),transparent)}
    .wrap{max-width:980px;margin:0 auto}
    .card{background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .table-wrap{overflow:auto}
    table{width:100%;border-collapse:collapse;min-width:720px}
    thead th{position:sticky;top:0;background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,0));backdrop-filter:blur(6px);text-align:left;font-size:.9rem;color:var(--muted)}
    th,td{padding:12px 10px;border-bottom:1px solid var(--border)}
    tbody tr:hover{background:rgba(124,92,255,.08)}
    .ex{font-weight:700}
    .tag{display:inline-block;padding:2px 8px;border-radius:999px;background:rgba(124,92,255,.15);color:#cfc7ff;font-size:.8rem;margin-left:6px}
  </style>
</head>
<body>
  <header>
    <h1>Rutina de hoy</h1>
    <div id="status" class="status">Cargandoâ€¦</div>
  </header>

  <div class="wrap">
    <section class="card table-wrap" id="tableCard" style="display:none">
      <table id="routineTable" aria-label="Tabla de rutina">
        <thead>
          <tr>
            <th>Ejercicio</th>
            <th>S1 Reps</th><th>S1 Peso</th>
            <th>S2 Reps</th><th>S2 Peso</th>
            <th>S3 Reps</th><th>S3 Peso</th>
            <th>S4 Reps</th><th>S4 Peso</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <script>
    // âš™ï¸ Config: dÃ³nde estÃ¡ tu JSON
    const DEFAULT_DATA_URL = 'routine.json'; 
    // Ejemplo alternativo: 
    // const DEFAULT_DATA_URL = 'https://raw.githubusercontent.com/USUARIO/REPO/main/routine.json';

    const status = document.getElementById('status');
    const tableCard = document.getElementById('tableCard');
    const tbody = document.querySelector('#routineTable tbody');

    function setStatus(text, ok = true){
      status.textContent = text;
      status.className = ok ? 'status' : 'status err';
    }

    function formatNumber(n){
      if (n == null || n === '') return '';
      const num = Number(n);
      if (!isFinite(num)) return String(n);
      return num.toFixed(2).replace(/\.00$/,'').replace(/(\.\d*[1-9])0$/,'$1');
    }

    function normalizeExerciseName(name){
      return name.replace(/\S+/g, w => w[0].toUpperCase() + w.slice(1));
    }

    function renderTable(obj){
      tbody.innerHTML = '';
      const entries = Object.entries(obj);
      if (entries.length === 0){ tableCard.style.display = 'none'; return; }
      tableCard.style.display = '';
      for (const [name, vals] of entries){
        const tr = document.createElement('tr');
        const tdName = document.createElement('td');
        tdName.className = 'ex';
        tdName.textContent = normalizeExerciseName(name);
        const bodyweight = (['w1','w2','w3','w4'].some(k => Number(vals?.[k]) === 0));
        if (bodyweight){ const tag = document.createElement('span'); tag.className='tag'; tag.textContent='BW'; tdName.appendChild(tag); }
        tr.appendChild(tdName);
        for (let i=1;i<=4;i++){
          const r = vals?.['r'+i];
          const w = vals?.['w'+i];
          const tdR = document.createElement('td'); tdR.textContent = r!=null ? formatNumber(r) : 'â€”';
          const tdW = document.createElement('td'); tdW.textContent = w!=null ? formatNumber(w) : 'â€”';
          tr.appendChild(tdR); tr.appendChild(tdW);
        }
        tbody.appendChild(tr);
      }
    }

    async function loadJSON(url){
      try{
        setStatus('Cargandoâ€¦');
        const res = await fetch(url, { cache: 'no-cache' });
        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();
        renderTable(data);
        setStatus('Cargado âœ“');
      }catch(err){
        console.error(err);
        tableCard.style.display = 'none';
        setStatus('Error: ' + err.message, false);
      }
    }

    // ðŸš€ carga inicial
    loadJSON(DEFAULT_DATA_URL);
  </script>
</body>
</html>